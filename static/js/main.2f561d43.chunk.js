(this["webpackJsonpweather-app-for-codica"]=this["webpackJsonpweather-app-for-codica"]||[]).push([[0],{35:function(e,t,c){},56:function(e,t,c){},83:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c.n(n),a=c(22),s=c.n(a),r=(c(56),c(35),c(57),c(44)),j=c.n(r),o=function(e){return j.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&appid=6153f58f351c52df740659b887409431&units=metric"))},l="ADD_CITY",d="REMOVE_CITY",b="UPDATE_CITY",h=function(e,t){return{type:l,city:e,number:t}},u=function(e,t){return function(c){o(e).then((function(e){200===e.status&&c(h(e.data,t))}))}},O=c(11),m=c(86),p=c(87),x=c(46),f=c(88),g=c(47),w=c(18),v=c(89),y=c(45),S=c(84),N=c(85),I=c(6),k=c(2),D=function(){var e=Object(n.useState)(""),t=Object(w.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)(""),s=Object(w.a)(a,2),r=s[0],j=s[1],l=Object(n.useState)(!1),d=Object(w.a)(l,2),b=d[0],u=d[1],m=Object(O.c)((function(e){return e.cities.cities.length})),p=Object(I.g)(),f=Object(O.b)(),g=function(){u(!0),o(c).then((function(e){var t;200===e.data.cod&&(t=e.data,f(h(t,m)),i(""),p.push("/".concat(t.name)),j(""),function(e){var t=JSON.parse(window.localStorage.getItem("cities"));t.push(e),window.localStorage.setItem("cities",JSON.stringify(t))}(e.data.name)),u(!1)})).catch((function(e){j(e.response.data.message),u(!1)}))};return Object(k.jsx)(v.a,{onSubmit:function(e){e.preventDefault(),g()},children:Object(k.jsxs)(v.a.Row,{children:[Object(k.jsx)(x.a,{xs:5,children:Object(k.jsx)(y.a,{placeholder:"Enter city name",value:c,onChange:function(e){i(e.target.value)}})}),Object(k.jsxs)(x.a,{children:[b?Object(k.jsx)(S.a,{variant:"success",disabled:!0,children:Object(k.jsx)(N.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})}):Object(k.jsx)(S.a,{variant:"success",onClick:g,children:"Add"}),r&&Object(k.jsx)("span",{className:"badge-danger",children:r})]})]})})},T=c(90),_=function(e){var t=Object(O.b)(),c=Object(n.useState)(!1),i=Object(w.a)(c,2),a=i[0],s=i[1],r=Object(I.g)(),j=e.cityData,l=j.weather[0],h="http://openweathermap.org/img/w/"+l.icon+".png";return Object(k.jsx)(T.a,{className:"bg-info",children:Object(k.jsxs)(T.a.Body,{children:[Object(k.jsx)(T.a.Title,{children:j.name}),a?Object(k.jsx)(N.a,{animation:"border"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(T.a.Subtitle,{className:"mb-2",children:[l.main," in ",j.name,Object(k.jsx)("img",{src:h,alt:"weatherImg"})]}),Object(k.jsxs)(T.a.Text,{children:["temp: ",j.main.temp,"\xb0\u0421"]}),Object(k.jsxs)(T.a.Text,{children:["feels like: ",j.main.feels_like,"\xb0\u0421"]}),Object(k.jsxs)(T.a.Text,{children:["wind speed: ",j.wind.speed," m/s"]}),Object(k.jsx)(S.a,{className:"bg-info",onClick:function(c){c.preventDefault(),s(!0),o(e.name).then((function(e){200===e.data.cod&&t(function(e){return{type:b,city:e}}(e.data)),s(!1)}))},children:"Update"}),Object(k.jsx)(S.a,{variant:"danger",onClick:function(c){var n;c.preventDefault(),t((n=e.name,{type:d,name:n})),function(){var t=JSON.parse(window.localStorage.getItem("cities")).filter((function(t){return t!==e.name}));window.localStorage.setItem("cities",JSON.stringify(t))}(),r.location.pathname==="/".concat(e.name)&&r.push("/"),console.log(window.localStorage)},children:"Remove"})]})]})})},J=function(){var e=Object(I.h)().cityName,t=Object(O.c)((function(t){return t.cities.cities.find((function(t){return t.name===e}))}));return t?Object(k.jsxs)("div",{children:[Object(k.jsxs)("h2",{children:["Weather in ",t.name]}),Object(k.jsxs)("p",{children:["temp: ",t.main.temp,"\xb0\u0421"]}),Object(k.jsxs)("p",{children:["feels like: ",t.main.feels_like,"\xb0\u0421"]}),Object(k.jsxs)("p",{children:["min: ",t.main.temp_min,"\xb0\u0421"]}),Object(k.jsxs)("p",{children:["max: ",t.main.temp_max,"\xb0\u0421"]}),Object(k.jsxs)("p",{children:["wind speed: ",t.wind.speed," m/s"]}),Object(k.jsxs)("p",{children:["humidity: ",t.main.humidity,"%"]})]}):Object(k.jsx)("div",{children:"Please select a city"})},C=function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{children:"Hi! This component was rendered because you haven't selected any city yet."}),Object(k.jsx)("p",{children:"Please use the search, if you want to check weather in your city"})]})},E=c(26);var A=function(){var e=Object(O.c)((function(e){return e.cities.cities})),t=Object(O.b)(),c=[];return window.localStorage.getItem("cities")?c=JSON.parse(window.localStorage.getItem("cities")):window.localStorage.setItem("cities",JSON.stringify([])),Object(n.useEffect)((function(){!function(){for(var e=0;e<c.length;e++){var n=c[e];t(u(n,e))}}()}),[]),Object(k.jsx)("div",{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)("h2",{children:"Weather App"}),Object(k.jsx)(p.a,{className:"justify-content-md-center",children:Object(k.jsx)(x.a,{children:Object(k.jsx)(D,{})})}),Object(k.jsxs)(p.a,{children:[Object(k.jsxs)(x.a,{xs:4,children:[Object(k.jsx)("h3",{children:"Your cities"}),Object(k.jsx)(f.a,{variant:"pills",children:e.sort((function(e,t){return e.number-t.number})).map((function(e,t){return Object(k.jsx)(g.a,{children:Object(k.jsx)(E.b,{to:"".concat(e.name),children:Object(k.jsx)(_,{name:e.name,cityData:e},t)},t)},t)}))})]}),Object(k.jsxs)(x.a,{xs:8,children:[Object(k.jsx)("h3",{children:"Details"}),Object(k.jsxs)(I.d,{children:[Object(k.jsx)(I.b,{path:"/hello_codica",children:Object(k.jsx)(C,{})}),Object(k.jsx)(I.b,{path:"/:cityName",children:Object(k.jsx)(J,{})}),Object(k.jsx)(I.b,{exact:!0,path:"/",children:Object(k.jsx)(I.a,{to:"".concat(c[0]||"/hello_codica")})})]})]})]})]})})},R=c(17),Y=c(50),M=c(15),P={cities:[]},W=Object(R.combineReducers)({cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return t.city.number=t.number,Object(M.a)(Object(M.a)({},e),{},{cities:[].concat(Object(Y.a)(e.cities),[t.city])});case d:return Object(M.a)(Object(M.a)({},e),{},{cities:e.cities.filter((function(e){return t.name!==e.name}))});case b:var c=e.cities.map((function(e){return e.name===t.city.name?t.city:e}));return Object(M.a)(Object(M.a)({},e),{},{cities:c});default:return e}}}),B=c(48),U=c(49),q=Object(R.createStore)(W,Object(U.composeWithDevTools)(Object(R.applyMiddleware)(B.a)));s.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(E.a,{basename:"/test-weather-app",children:Object(k.jsx)(O.a,{store:q,children:Object(k.jsx)(A,{})})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.2f561d43.chunk.js.map